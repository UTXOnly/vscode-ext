{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Nginx Integration Configuration",
  "type": "object",
  "properties": {
    "init_config": {
      "type": "object",
      "properties": {
        "timeout": {
          "type": "integer",
          "description": "HTTP timeout in seconds",
          "default": 10
        },
        "headers": {
          "type": "object",
          "description": "Additional HTTP headers"
        },
        "min_collection_interval": {
          "type": "integer",
          "description": "Minimum collection interval in seconds",
          "default": 15
        }
      },
      "description": "Initial configuration for the integration"
    },
    "instances": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "nginx_status_url": {
            "type": "string",
            "default": "http://localhost:81/nginx_status/",
            "description": "For every instance, you need an `nginx_status_url` and can optionally\nsupply a list of tags.  This plugin requires nginx to be compiled with\nthe nginx stub status module option, and activated with the correct\nconfiguration stanza.  On debian/ubuntu, this is included in the\n`nginx-extras` package.  For more details, see:\n\n  http://docs.datadoghq.com/integrations/nginx/\n\nFor NGINX Plus API Release 13+ users using the http_api_module,\nset nginx_status_url to the location of the `/api` endpoint.\nE.g. `nginx_status_url: http://localhost:8080/api`"
          },
          "use_plus_api": {
            "type": "boolean",
            "default": false,
            "description": "If you are using the commercial version of nginx, for releases R13 and above,\nthere is a new API to replace the extended status API.\nSee https://www.nginx.com/blog/nginx-plus-r13-released/\nTo use it set `use_plus_api` to true"
          },
          "use_plus_api_stream": {
            "type": "boolean",
            "default": true,
            "description": "If you are using the commercial version of NGINX, for releases R13 and above,\nthere is an API that replaces the extended status API.\nSee https://www.nginx.com/blog/nginx-plus-r13-released/\nIf you're not using Stream servers, you can disable this part to remove errors in NGINX Plus API calls.\nTo use it set `use_plus_api_stream` to `true`."
          },
          "plus_api_version": {
            "type": "integer",
            "default": 2,
            "description": "Specify the version of the Plus API to use. The check supports versions 1-7."
          },
          "only_query_enabled_endpoints": {
            "type": "boolean",
            "default": false,
            "description": "Enable this option if you would like the check to determine which API endpoints\nto query based on your NGINX Plus configuration."
          },
          "use_vts": {
            "type": "boolean",
            "default": false,
            "description": "Set this option to true if you are using the nginx vhost_traffic_status module.\nIf you are using VTS, set the nginx_status_url to something like http://localhost/nginx_stats/format/json."
          },
          "host": {
            "type": "string",
            "description": "Host to connect to"
          },
          "port": {
            "type": "integer",
            "description": "Port to connect to"
          },
          "username": {
            "type": "string",
            "description": "Username for authentication"
          },
          "password": {
            "type": "string",
            "description": "Password for authentication"
          },
          "disable_generic_tags": {
            "type": "boolean",
            "description": "Disable generic tags to avoid conflicts with other integrations",
            "default": false
          }
        },
        "required": [
          "nginx_status_url"
        ]
      },
      "description": "Integration instances configuration"
    },
    "logs": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "Log type (file, tcp, udp, etc.)"
          },
          "path": {
            "type": "string",
            "description": "Path to log file"
          },
          "source": {
            "type": "string",
            "description": "Log source identifier"
          }
        }
      },
      "description": "Log collection configuration"
    }
  },
  "required": [
    "instances"
  ],
  "additionalProperties": false
}